{
    "nodes": [
        {
            "pos_x": 14.0,
            "pos_y": 45.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 0,
            "type_id": 1,
            "softbody_node_id": 26
        },
        {
            "pos_x": 18.0,
            "pos_y": 175.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 1,
            "type_id": 1,
            "softbody_node_id": 27
        },
        {
            "pos_x": 16.0,
            "pos_y": 305.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 2,
            "type_id": 1,
            "softbody_node_id": 24
        },
        {
            "pos_x": 18.0,
            "pos_y": 435.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 3,
            "type_id": 1,
            "softbody_node_id": 25
        },
        {
            "pos_x": 272.0,
            "pos_y": 47.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 250.0,
            "user_size_y": 206.0,
            "id": 4,
            "type_id": 4,
            "source_code": "// Roof, rear, lateral\n// aligned: lat, longi, vert\n// Node26 = right side\n\n\nvoid step() {\n    SMOOTH_XYZ(0);\n    SMOOTH_XYZ(3);\n}"
        },
        {
            "pos_x": 272.0,
            "pos_y": 295.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 250.0,
            "user_size_y": 200.0,
            "id": 5,
            "type_id": 4,
            "source_code": "// Roof, front, lateral\n// aligned: lat, longi, vert\n// Node24 = right side\n\n\nvoid step() {\n    SMOOTH_XYZ(0);\n    SMOOTH_XYZ(3);\n}"
        },
        {
            "pos_x": 16.0,
            "pos_y": 687.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 6,
            "type_id": 1,
            "softbody_node_id": 22
        },
        {
            "pos_x": 16.0,
            "pos_y": 808.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 7,
            "type_id": 1,
            "softbody_node_id": 23
        },
        {
            "pos_x": 272.0,
            "pos_y": 684.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 250.0,
            "user_size_y": 200.0,
            "id": 8,
            "type_id": 4,
            "source_code": "// Mid-cage, front\n// aligned: lat, longi, vert\n\n\nvoid step() {\n    SMOOTH_XYZ(0);\n    SMOOTH_XYZ(3);\n}"
        },
        {
            "pos_x": 16.0,
            "pos_y": 932.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 9,
            "type_id": 1,
            "softbody_node_id": 28
        },
        {
            "pos_x": 16.0,
            "pos_y": 1050.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 10,
            "type_id": 1,
            "softbody_node_id": 29
        },
        {
            "pos_x": 268.0,
            "pos_y": 936.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 250.0,
            "user_size_y": 200.0,
            "id": 11,
            "type_id": 4,
            "source_code": "// Mid-cage, rear, lateral\n// aligned: lat, longi, vert\n\n\nvoid step() {\n    SMOOTH_XYZ(0);\n    SMOOTH_XYZ(3);\n}"
        },
        {
            "pos_x": 20.0,
            "pos_y": 1295.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 12,
            "type_id": 1,
            "softbody_node_id": 20
        },
        {
            "pos_x": 22.0,
            "pos_y": 1413.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 13,
            "type_id": 1,
            "softbody_node_id": 21
        },
        {
            "pos_x": 264.0,
            "pos_y": 1295.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 250.0,
            "user_size_y": 200.0,
            "id": 14,
            "type_id": 4,
            "source_code": "// Floor, front, lateral\n// aligned: lat, longi, vert\n\n\nvoid step() {\n    SMOOTH_XYZ(0);\n    SMOOTH_XYZ(3);\n}\n"
        },
        {
            "pos_x": 21.0,
            "pos_y": 1535.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 15,
            "type_id": 1,
            "softbody_node_id": 30
        },
        {
            "pos_x": 19.0,
            "pos_y": 1659.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 0.0,
            "user_size_y": 0.0,
            "id": 16,
            "type_id": 1,
            "softbody_node_id": 31
        },
        {
            "pos_x": 265.0,
            "pos_y": 1543.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 248.0,
            "user_size_y": 184.0,
            "id": 17,
            "type_id": 4,
            "source_code": "// Floor, rear, lateral\n// aligned: lat, longi, vert\n\n\nvoid step() {\n    SMOOTH_XYZ(0);\n    SMOOTH_XYZ(3);\n}\n"
        },
        {
            "pos_x": 612.0,
            "pos_y": 77.0,
            "arranged_pos_x": -2.0,
            "arranged_pos_y": -2.0,
            "user_size_x": 236.0,
            "user_size_y": 112.0,
            "id": 27,
            "type_id": 4,
            "source_code": "// Roll (roof, rear)\n\n\nvoid step(){\n   Write(0, CALC_ROLL(0,3));\n}\n"
        }
    ],
    "links": [
        {
            "node_src_id": 0,
            "node_dst_id": 4,
            "slot_src": 0,
            "slot_dst": 0
        },
        {
            "node_src_id": 0,
            "node_dst_id": 4,
            "slot_src": 1,
            "slot_dst": 1
        },
        {
            "node_src_id": 1,
            "node_dst_id": 4,
            "slot_src": 1,
            "slot_dst": 4
        },
        {
            "node_src_id": 0,
            "node_dst_id": 4,
            "slot_src": 2,
            "slot_dst": 2
        },
        {
            "node_src_id": 1,
            "node_dst_id": 4,
            "slot_src": 0,
            "slot_dst": 3
        },
        {
            "node_src_id": 1,
            "node_dst_id": 4,
            "slot_src": 2,
            "slot_dst": 5
        },
        {
            "node_src_id": 2,
            "node_dst_id": 5,
            "slot_src": 0,
            "slot_dst": 0
        },
        {
            "node_src_id": 2,
            "node_dst_id": 5,
            "slot_src": 1,
            "slot_dst": 1
        },
        {
            "node_src_id": 2,
            "node_dst_id": 5,
            "slot_src": 2,
            "slot_dst": 2
        },
        {
            "node_src_id": 3,
            "node_dst_id": 5,
            "slot_src": 0,
            "slot_dst": 3
        },
        {
            "node_src_id": 3,
            "node_dst_id": 5,
            "slot_src": 1,
            "slot_dst": 4
        },
        {
            "node_src_id": 3,
            "node_dst_id": 5,
            "slot_src": 3,
            "slot_dst": 5
        },
        {
            "node_src_id": 6,
            "node_dst_id": 8,
            "slot_src": 0,
            "slot_dst": 0
        },
        {
            "node_src_id": 6,
            "node_dst_id": 8,
            "slot_src": 1,
            "slot_dst": 1
        },
        {
            "node_src_id": 6,
            "node_dst_id": 8,
            "slot_src": 2,
            "slot_dst": 2
        },
        {
            "node_src_id": 7,
            "node_dst_id": 8,
            "slot_src": 0,
            "slot_dst": 3
        },
        {
            "node_src_id": 7,
            "node_dst_id": 8,
            "slot_src": 1,
            "slot_dst": 4
        },
        {
            "node_src_id": 7,
            "node_dst_id": 8,
            "slot_src": 2,
            "slot_dst": 5
        },
        {
            "node_src_id": 9,
            "node_dst_id": 11,
            "slot_src": 0,
            "slot_dst": 0
        },
        {
            "node_src_id": 9,
            "node_dst_id": 11,
            "slot_src": 1,
            "slot_dst": 1
        },
        {
            "node_src_id": 9,
            "node_dst_id": 11,
            "slot_src": 2,
            "slot_dst": 2
        },
        {
            "node_src_id": 10,
            "node_dst_id": 11,
            "slot_src": 0,
            "slot_dst": 3
        },
        {
            "node_src_id": 10,
            "node_dst_id": 11,
            "slot_src": 1,
            "slot_dst": 4
        },
        {
            "node_src_id": 10,
            "node_dst_id": 11,
            "slot_src": 2,
            "slot_dst": 5
        },
        {
            "node_src_id": 12,
            "node_dst_id": 14,
            "slot_src": 0,
            "slot_dst": 0
        },
        {
            "node_src_id": 12,
            "node_dst_id": 14,
            "slot_src": 1,
            "slot_dst": 1
        },
        {
            "node_src_id": 12,
            "node_dst_id": 14,
            "slot_src": 2,
            "slot_dst": 2
        },
        {
            "node_src_id": 13,
            "node_dst_id": 14,
            "slot_src": 0,
            "slot_dst": 3
        },
        {
            "node_src_id": 13,
            "node_dst_id": 14,
            "slot_src": 1,
            "slot_dst": 4
        },
        {
            "node_src_id": 13,
            "node_dst_id": 14,
            "slot_src": 2,
            "slot_dst": 5
        },
        {
            "node_src_id": 15,
            "node_dst_id": 17,
            "slot_src": 0,
            "slot_dst": 0
        },
        {
            "node_src_id": 15,
            "node_dst_id": 17,
            "slot_src": 1,
            "slot_dst": 1
        },
        {
            "node_src_id": 15,
            "node_dst_id": 17,
            "slot_src": 2,
            "slot_dst": 2
        },
        {
            "node_src_id": 16,
            "node_dst_id": 17,
            "slot_src": 0,
            "slot_dst": 3
        },
        {
            "node_src_id": 16,
            "node_dst_id": 17,
            "slot_src": 1,
            "slot_dst": 4
        },
        {
            "node_src_id": 16,
            "node_dst_id": 17,
            "slot_src": 2,
            "slot_dst": 5
        },
        {
            "node_src_id": 4,
            "node_dst_id": 27,
            "slot_src": 0,
            "slot_dst": 0
        },
        {
            "node_src_id": 4,
            "node_dst_id": 27,
            "slot_src": 2,
            "slot_dst": 2
        },
        {
            "node_src_id": 4,
            "node_dst_id": 27,
            "slot_src": 3,
            "slot_dst": 3
        },
        {
            "node_src_id": 4,
            "node_dst_id": 27,
            "slot_src": 4,
            "slot_dst": 4
        },
        {
            "node_src_id": 4,
            "node_dst_id": 27,
            "slot_src": 5,
            "slot_dst": 5
        },
        {
            "node_src_id": 4,
            "node_dst_id": 27,
            "slot_src": 1,
            "slot_dst": 1
        }
    ],
    "udp_pos_node": {
        "pos_x": -300.0,
        "pos_y": 100.0,
        "arranged_pos_x": -2.0,
        "arranged_pos_y": -2.0,
        "user_size_x": 0.0,
        "user_size_y": 0.0,
        "id": -2147483646,
        "type_id": 7
    },
    "udp_acc_node": {
        "pos_x": -300.0,
        "pos_y": 300.0,
        "arranged_pos_x": -2.0,
        "arranged_pos_y": -2.0,
        "user_size_x": 0.0,
        "user_size_y": 0.0,
        "id": -2147483644,
        "type_id": 7
    },
    "udp_orient_node": {
        "pos_x": -300.0,
        "pos_y": 400.0,
        "arranged_pos_x": -2.0,
        "arranged_pos_y": -2.0,
        "user_size_x": 0.0,
        "user_size_y": 0.0,
        "id": -2147483643,
        "type_id": 7
    },
    "udp_velo_node": {
        "pos_x": -300.0,
        "pos_y": 200.0,
        "arranged_pos_x": -2.0,
        "arranged_pos_y": -2.0,
        "user_size_x": 0.0,
        "user_size_y": 0.0,
        "id": -2147483645,
        "type_id": 7
    },
    "shared_script": "// ========== Pseudo-macros ========== //\n\nvoid SMOOTH_XYZ(int slot)\n{\n    Passthru3(slot); //TODO: smoothing!\n}\n\n// Input: 2 slots with XYZ positions\n// Output: local roll (=banking). Positive = right side, negative=left.\nfloat CALC_ROLL(int sR, int sL)\n{\n    // Algo: build a 2D right-angle triangle in 3D space.\n    // Points: A=R, B=L, C=projection of B to XY plane\n\n    float rX = Read(sR, 0);      float lX = Read(sL, 0);\n    float rY = Read(sR+1, 0);    float lY = Read(sL+1, 0);\n    float rZ = Read(sR+2, 0);    float lZ = Read(sL+2, 0);\n\n    float aLen = lZ - rZ;\n    float bLenX = lX - rX;\n    float bLenY = lY - rY;\n    float bLen = sqrt( (bLenX*bLenX)+(bLenY*bLenY) );\n\n    return atan(tan(aLen / bLen));\n}\n\n////////// Utils //////////\n\nvoid Passthru1(int slot)\n{\n    Write(slot, Read(slot, 0));\n}\n\nvoid Passthru3(int slot)\n{\n    Passthru1(slot);\n    Passthru1(slot+1);\n    Passthru1(slot+2);\n}"
}